var Le=Object.defineProperty;var Ne=(e,t,n)=>t in e?Le(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var p=(e,t,n)=>(Ne(e,typeof t!="symbol"?t+"":t,n),n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const c of i)if(c.type==="childList")for(const s of c.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const c={};return i.integrity&&(c.integrity=i.integrity),i.referrerpolicy&&(c.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?c.credentials="include":i.crossorigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function r(i){if(i.ep)return;i.ep=!0;const c=n(i);fetch(i.href,c)}})();function M(){}function he(e,t){for(const n in t)e[n]=t[n];return e}function be(e){return e()}function _e(){return Object.create(null)}function D(e){e.forEach(be)}function Me(e){return typeof e=="function"}function K(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function Ce(e){return Object.keys(e).length===0}function _(e,t){e.appendChild(t)}function $(e,t,n){e.insertBefore(t,n||null)}function A(e){e.parentNode&&e.parentNode.removeChild(e)}function He(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function y(e){return document.createElement(e)}function S(e){return document.createTextNode(e)}function C(){return S(" ")}function I(e,t,n,r){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n,r)}function h(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function Re(e){return Array.from(e.childNodes)}function le(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function Oe(e,t,{bubbles:n=!1,cancelable:r=!1}={}){const i=document.createEvent("CustomEvent");return i.initCustomEvent(e,n,r,t),i}let G;function F(e){G=e}function $e(){if(!G)throw new Error("Function called outside component initialization");return G}function Ie(e){$e().$$.on_mount.push(e)}function ce(){const e=$e();return(t,n,{cancelable:r=!1}={})=>{const i=e.$$.callbacks[t];if(i){const c=Oe(t,n,{cancelable:r});return i.slice().forEach(s=>{s.call(e,c)}),!c.defaultPrevented}return!0}}const O=[],ye=[],ie=[],ge=[],De=Promise.resolve();let ue=!1;function je(){ue||(ue=!0,De.then(Pe))}function fe(e){ie.push(e)}const oe=new Set;let R=0;function Pe(){if(R!==0)return;const e=G;do{try{for(;R<O.length;){const t=O[R];R++,F(t),xe(t.$$)}}catch(t){throw O.length=0,R=0,t}for(F(null),O.length=0,R=0;ye.length;)ye.pop()();for(let t=0;t<ie.length;t+=1){const n=ie[t];oe.has(n)||(oe.add(n),n())}ie.length=0}while(O.length);for(;ge.length;)ge.pop()();ue=!1,oe.clear(),F(e)}function xe(e){if(e.fragment!==null){e.update(),D(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(fe)}}const se=new Set;let Ue;function U(e,t){e&&e.i&&(se.delete(e),e.i(t))}function ee(e,t,n,r){if(e&&e.o){if(se.has(e))return;se.add(e),Ue.c.push(()=>{se.delete(e),r&&(n&&e.d(1),r())}),e.o(t)}else r&&r()}function pe(e,t){const n={},r={},i={$$scope:1};let c=e.length;for(;c--;){const s=e[c],l=t[c];if(l){for(const u in s)u in l||(r[u]=1);for(const u in l)i[u]||(n[u]=l[u],i[u]=1);e[c]=l}else for(const u in s)i[u]=1}for(const s in r)s in n||(n[s]=void 0);return n}function ve(e){return typeof e=="object"&&e!==null?e:{}}function te(e){e&&e.c()}function W(e,t,n,r){const{fragment:i,after_update:c}=e.$$;i&&i.m(t,n),r||fe(()=>{const s=e.$$.on_mount.map(be).filter(Me);e.$$.on_destroy?e.$$.on_destroy.push(...s):D(s),e.$$.on_mount=[]}),c.forEach(fe)}function B(e,t){const n=e.$$;n.fragment!==null&&(D(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function We(e,t){e.$$.dirty[0]===-1&&(O.push(e),je(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function V(e,t,n,r,i,c,s,l=[-1]){const u=G;F(e);const o=e.$$={fragment:null,ctx:[],props:c,update:M,not_equal:i,bound:_e(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(u?u.$$.context:[])),callbacks:_e(),dirty:l,skip_bound:!1,root:t.target||u.$$.root};s&&s(o.root);let d=!1;if(o.ctx=n?n(e,t.props||{},(m,g,...b)=>{const a=b.length?b[0]:g;return o.ctx&&i(o.ctx[m],o.ctx[m]=a)&&(!o.skip_bound&&o.bound[m]&&o.bound[m](a),d&&We(e,m)),g}):[],o.update(),d=!0,D(o.before_update),o.fragment=r?r(o.ctx):!1,t.target){if(t.hydrate){const m=Re(t.target);o.fragment&&o.fragment.l(m),m.forEach(A)}else o.fragment&&o.fragment.c();t.intro&&U(e.$$.fragment),W(e,t.target,t.anchor,t.customElement),Pe()}F(u)}class z{$destroy(){B(this,1),this.$destroy=M}$on(t,n){if(!Me(n))return M;const r=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return r.push(n),()=>{const i=r.indexOf(n);i!==-1&&r.splice(i,1)}}$set(t){this.$$set&&!Ce(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function Be(e,t){J(e);const n=H(e,t);return n===-1?Se(e):n}function Fe(e,t){const n=J(e),r=new Map;for(const c of n){const s=[...e];s[c]=t,r.set(c,ae(s,T(t),t,!1)),s[c]=k.EMPTY}let i=[-1,-1/0];for(const c of r)c[1]>i[1]&&(i=c);return i[0]}function ae(e,t,n,r){const i=J(e),c=Ye(e);if(c===n)return 1;if(c===T(n))return-1;if(!i.length)return 0;let s=r?-1/0:1/0;for(const l of i){if(e[l]=t,r){const u=ae(e,T(t),n,!1);s=Math.max(s,u)}else{const u=ae(e,T(t),n,!0);s=Math.min(s,u)}e[l]=k.EMPTY}return s}function qe(e,t){if(H(e,t)!==-1)return H(e,t);{const n=H(e,T(t));if(console.log(n),H(e,T(t))!==-1)return H(e,T(t));if(e[4]===0)return 4;for(;;){const r=Te(9);if(e[r]===0)return r}}}function Ge(e,t){const n=H(e,T(t));return n===-1?Se(e):n}function ne(e){switch(e){case v.EASY:return Be;case v.PETTY:return Ge;case v.MEDIUM:return qe;case v.HARD:return Fe;case(v.HUMAN||v.ONLINE):return;default:return}}function H(e,t){let n=0;return n=N(e.slice(0,3),t),n>=0?n:(n=N(e.slice(3,6),t),n>=0?n+3:(n=N(e.slice(6,9),t),n>=0?n+6:(n=N([e[0],e[3],e[6]],t),n>=0?n*3:(n=N([e[1],e[4],e[7]],t),n>=0?n*3+1:(n=N([e[2],e[5],e[8]],t),n>=0?n*3+2:(n=N([e[0],e[4],e[8]],t),n>=0?n*4:(n=N([e[2],e[4],e[6]],t),n>=0?n*2+2:-1)))))))}function N(e,t){return e[0]===t&&e[1]===t&&e[2]===k.EMPTY?2:e[0]===t&&e[2]===t&&e[1]===k.EMPTY?1:e[1]===t&&e[2]===t&&e[0]===k.EMPTY?0:-1}function Te(e){return Math.floor(Math.random()*e)}function Se(e){const t=J(e);if(!t.length)return-1;let n=-1,r=!1;for(;!r;)n=Te(9),r=t.indexOf(n)>=0;return n}var v=(e=>(e[e.EASY=0]="EASY",e[e.PETTY=1]="PETTY",e[e.MEDIUM=2]="MEDIUM",e[e.HARD=3]="HARD",e[e.HUMAN=4]="HUMAN",e[e.ONLINE=5]="ONLINE",e))(v||{}),k=(e=>(e[e.EMPTY=0]="EMPTY",e[e.PLAYER1=1]="PLAYER1",e[e.PLAYER2=2]="PLAYER2",e))(k||{});class ke{constructor(t){p(this,"score",0);p(this,"field");p(this,"botMove");this.field=t}addWin(){this.score++}isHuman(){return this.botMove===void 0}move(t){return this.botMove!==void 0?this.botMove(t,this.field):-1}}class Ke{constructor(t=new ke(1),n=new ke(2),r=0){p(this,"player");p(this,"enemy");p(this,"mode");t.score=0,n.score=0,this.mode=r,this.player=t,this.enemy=n,this.enemy.botMove=ne(this.mode)}addWin(t){switch(t){case 1:this.player.addWin();break;case 2:this.enemy.addWin();break}}switchSides(){const t=this.player.botMove;this.player.botMove=this.enemy.botMove,this.enemy.botMove=t;const n=this.player.score;this.player.score=this.enemy.score,this.enemy.score=n}updateMode(t){if(this.mode=t,this.player.isHuman()&&this.enemy.isHuman()&&t!==4){this.enemy.botMove=ne(this.mode);return}this.player.isHuman()||(this.player.botMove=ne(this.mode)),this.enemy.isHuman()||(this.enemy.botMove=ne(this.mode))}}class we{constructor(t){p(this,"finished");p(this,"winner",0);this.winner=Ye(t),this.finished=Ve(t)||this.winner!==0}isDraw(){return this.finished===!0&&this.winner===0}}function Ve(e){return!e.some(t=>t===0)}function Ye(e){let t=0,n=0;return e.forEach(r=>{t===3||n===3||(r===1?(t++,n=0):r===2?(n++,t=0):(t=0,n=0))}),t===3?1:n===3?2:e[0]===e[3]&&e[3]===e[6]&&e[0]!==0?e[0]:e[1]===e[4]&&e[4]===e[7]&&e[1]!==0?e[1]:e[2]===e[5]&&e[5]===e[8]&&e[2]!==0?e[2]:e[0]===e[4]&&e[4]===e[8]&&e[0]!==0?e[0]:e[2]===e[4]&&e[4]===e[6]&&e[2]!==0?e[2]:0}function re(){const e=new Array(9);return e.fill(0),e}function J(e){return e.map((t,n)=>t!==0?-1:n).filter(t=>t>=0)}function T(e){return ze(e)?3-e:0}function ze(e){return e===1||e===2}function Ee(e,t,n){const r=e.slice();return r[11]=t[n],r[13]=n,r}function Ae(e){let t,n=e[1](e[11])+"",r,i,c,s;function l(){return e[5](e[13])}function u(){return e[6](e[13])}return{c(){t=y("div"),r=S(n),i=C(),h(t,"class","field svelte-1sape3k"),h(t,"id",e[13].toString())},m(o,d){$(o,t,d),_(t,r),_(t,i),c||(s=[I(t,"click",l),I(t,"keydown",u)],c=!0)},p(o,d){e=o,d&3&&n!==(n=e[1](e[11])+"")&&le(r,n)},d(o){o&&A(t),c=!1,D(s)}}}function Je(e){let t,n=e[0],r=[];for(let i=0;i<n.length;i+=1)r[i]=Ae(Ee(e,n,i));return{c(){t=y("div");for(let i=0;i<r.length;i+=1)r[i].c();h(t,"id","grid"),h(t,"class","svelte-1sape3k")},m(i,c){$(i,t,c);for(let s=0;s<r.length;s+=1)r[s].m(t,null)},p(i,[c]){if(c&7){n=i[0];let s;for(s=0;s<n.length;s+=1){const l=Ee(i,n,s);r[s]?r[s].p(l,c):(r[s]=Ae(l),r[s].c(),r[s].m(t,null))}for(;s<r.length;s+=1)r[s].d(1);r.length=n.length}},i:M,o:M,d(i){i&&A(t),He(r,i)}}}function Qe(e,t,n){let{board:r}=t,{fieldToString:i}=t,{player:c}=t,{enemy:s}=t,l=k.PLAYER1|k.PLAYER2;l=k.PLAYER1;const u=ce();function o(){return l===c.field?c:s}function d(a){m(a,o().field)&&(l=T(l),o().isHuman()||(m(o().move(r),o().field),l=T(l)))}function m(a,f){return r[a]!==k.EMPTY||new we(r).finished?!1:(n(0,r[a]=f,r),n(0,r),!0)}const g=a=>d(a),b=a=>d(a);return e.$$set=a=>{"board"in a&&n(0,r=a.board),"fieldToString"in a&&n(1,i=a.fieldToString),"player"in a&&n(3,c=a.player),"enemy"in a&&n(4,s=a.enemy)},e.$$.update=()=>{if(e.$$.dirty&1){const a=new we(r);a.finished&&u("finished",a)}e.$$.dirty&1&&J(r).length===9&&(l=k.PLAYER1,o().isHuman()||(m(o().move(r),o().field),l=k.PLAYER2))},[r,i,d,c,s,g,b]}class Xe extends z{constructor(t){super(),V(this,t,Qe,Je,K,{board:0,fieldToString:1,player:3,enemy:4})}}function Ze(e){let t;return{c(){t=S("ðŸ¤–")},m(n,r){$(n,t,r)},d(n){n&&A(t)}}}function et(e){let t;return{c(){t=S("ðŸ‘¨â€ðŸ’»")},m(n,r){$(n,t,r)},d(n){n&&A(t)}}}function tt(e){let t;return{c(){t=S("ðŸ¤–")},m(n,r){$(n,t,r)},d(n){n&&A(t)}}}function nt(e){let t;return{c(){t=S("ðŸ‘¨â€ðŸ’»")},m(n,r){$(n,t,r)},d(n){n&&A(t)}}}function rt(e){let t,n,r,i,c,s=e[0].score+"",l,u,o,d,m,g=e[1].score+"",b,a,f,w,j,Q;function de(E,P){return P&1&&(i=null),i==null&&(i=!!E[0].isHuman()),i?et:Ze}let X=de(e,-1),Y=X(e);function me(E,P){return P&2&&(w=null),w==null&&(w=!!E[1].isHuman()),w?nt:tt}let Z=me(e,-1),L=Z(e);return{c(){t=y("div"),n=y("div"),r=y("i"),Y.c(),c=C(),l=S(s),u=C(),o=y("div"),o.textContent="ðŸ†š",d=C(),m=y("div"),b=S(g),a=C(),f=y("i"),L.c(),h(r,"class","svelte-1gwglwo"),h(n,"id","player1"),h(n,"class","player svelte-1gwglwo"),h(o,"id","versus"),h(o,"class","svelte-1gwglwo"),h(f,"class","svelte-1gwglwo"),h(m,"id","player2"),h(m,"class","player svelte-1gwglwo"),h(t,"id","scoreboard"),h(t,"class","svelte-1gwglwo")},m(E,P){$(E,t,P),_(t,n),_(n,r),Y.m(r,null),_(n,c),_(n,l),_(t,u),_(t,o),_(t,d),_(t,m),_(m,b),_(m,a),_(m,f),L.m(f,null),j||(Q=[I(o,"click",e[3]),I(o,"keydown",e[4])],j=!0)},p(E,[P]){X!==(X=de(E,P))&&(Y.d(1),Y=X(E),Y&&(Y.c(),Y.m(r,null))),P&1&&s!==(s=E[0].score+"")&&le(l,s),P&2&&g!==(g=E[1].score+"")&&le(b,g),Z!==(Z=me(E,P))&&(L.d(1),L=Z(E),L&&(L.c(),L.m(f,null)))},i:M,o:M,d(E){E&&A(t),Y.d(),L.d(),j=!1,D(Q)}}}function it(e,t,n){let{player:r}=t,{enemy:i}=t;const c=ce();function s(){c("switch")}const l=()=>s(),u=()=>s();return e.$$set=o=>{"player"in o&&n(0,r=o.player),"enemy"in o&&n(1,i=o.enemy)},[r,i,s,l,u]}class st extends z{constructor(t){super(),V(this,t,it,rt,K,{player:0,enemy:1})}}function ct(e){let t,n,r,i,c,s,l,u,o,d;return{c(){t=y("nav"),n=y("select"),r=y("option"),r.textContent="ðŸ¤–",i=y("option"),i.textContent="ðŸ¤–âž•",c=y("option"),c.textContent="ðŸ¤–â—",s=y("option"),s.textContent="â—ðŸ¤–â—",l=y("option"),l.textContent="ðŸ‘¨â€ðŸ’»",u=y("option"),u.textContent="ðŸ‘¨â€ðŸ’» / ðŸ‘¨â€ðŸ’»",r.__value="easy",r.value=r.__value,h(r,"class","svelte-17bkcmu"),i.__value="petty",i.value=i.__value,h(i,"class","svelte-17bkcmu"),c.__value="medium",c.value=c.__value,h(c,"class","svelte-17bkcmu"),s.__value="hard",s.value=s.__value,h(s,"class","svelte-17bkcmu"),l.__value="human",l.value=l.__value,h(l,"class","svelte-17bkcmu"),u.__value="online",u.value=u.__value,u.disabled=!0,h(u,"class","svelte-17bkcmu"),h(n,"id","mode"),h(n,"class","svelte-17bkcmu"),h(t,"class","svelte-17bkcmu")},m(m,g){$(m,t,g),_(t,n),_(n,r),_(n,i),_(n,c),_(n,s),_(n,l),_(n,u),o||(d=I(n,"change",e[0]),o=!0)},p:M,i:M,o:M,d(m){m&&A(t),o=!1,d()}}}function ot(e){const t=ce();function n(r){const i=r.target.value;let c=v.EASY;switch(i){case"easy":c=v.EASY;break;case"petty":c=v.PETTY;break;case"medium":c=v.MEDIUM;break;case"hard":c=v.HARD;break;case"human":c=v.HUMAN;break;case"online":c=v.ONLINE;break;default:c=v.EASY;break}t("change",c)}return[n]}class lt extends z{constructor(t){super(),V(this,t,ot,ct,K,{})}}class x{constructor({primary:t,secondary:n,primaryAccent:r,secondaryAccent:i,background:c,name:s}){p(this,"primary");p(this,"secondary");p(this,"primaryAccent");p(this,"secondaryAccent");p(this,"background");p(this,"name");this.primary=t,this.secondary=n,this.primaryAccent=r,this.secondaryAccent=i,this.background=c,this.name=s}CSS(){return`--primary: ${this.primary}; --secondary: ${this.secondary}; --primaryAccent: ${this.primaryAccent}; --secondaryAccent: ${this.secondaryAccent}; --background: ${this.background}`}}const q=[new x({primary:"#1e1f26",secondary:"#bdc3c7",primaryAccent:"#3498db",secondaryAccent:"#2980b9",background:"#2c3e50",name:"Midnight blue"}),new x({primary:"#ffd700",secondary:"#616161",primaryAccent:"#8c7853",secondaryAccent:"#c5cae9",background:"#121212",name:"Black and gold"}),new x({primary:"#4e9a06",secondary:"#f7e267",primaryAccent:"#edd400",secondaryAccent:"#ce5c00",background:"#1b1b1b",name:"Dark green"}),new x({primary:"#8e24aa",secondary:"#ffd54f",primaryAccent:"#ffb300",secondaryAccent:"#e65100",background:"#121212",name:"Vibrant purple"}),new x({primary:"#008080",secondary:"#ffe0b2",primaryAccent:"#ffab91",secondaryAccent:"#4a148c",background:"#232323",name:"Teal blue"})];function ut(e){let t,n,r,i,c;return{c(){t=y("button"),n=S("ðŸŽ¨"),h(t,"title",r=q[e[0]].name),h(t,"class","svelte-tojmix")},m(s,l){$(s,t,l),_(t,n),i||(c=I(t,"click",e[2]),i=!0)},p(s,[l]){l&1&&r!==(r=q[s[0]].name)&&h(t,"title",r)},i:M,o:M,d(s){s&&A(t),i=!1,c()}}}function ft(e,t,n){const r=ce();let i=0;Ie(()=>{r("changed",q[i])});function c(){n(0,i=(i+1)%q.length),r("changed",q[i])}return[i,c,()=>c()]}class at extends z{constructor(t){super(),V(this,t,ft,ut,K,{})}}function dt(e){let t,n,r,i,c,s,l,u,o,d;n=new lt({}),n.$on("change",e[5]);const m=[e[1]];let g={};for(let f=0;f<m.length;f+=1)g=he(g,m[f]);i=new st({props:g}),i.$on("switch",e[6]),s=new at({}),s.$on("changed",_t);const b=[{board:e[0]},{fieldToString:e[2]},e[1]];let a={};for(let f=0;f<b.length;f+=1)a=he(a,b[f]);return o=new Xe({props:a}),o.$on("finished",e[3]),{c(){t=y("header"),te(n.$$.fragment),r=C(),te(i.$$.fragment),c=C(),te(s.$$.fragment),l=C(),u=y("main"),te(o.$$.fragment),h(t,"class","svelte-3o9bc2"),h(u,"class","svelte-3o9bc2")},m(f,w){$(f,t,w),W(n,t,null),_(t,r),W(i,t,null),_(t,c),W(s,t,null),$(f,l,w),$(f,u,w),W(o,u,null),d=!0},p(f,[w]){const j=w&2?pe(m,[ve(f[1])]):{};i.$set(j);const Q=w&7?pe(b,[w&1&&{board:f[0]},w&4&&{fieldToString:f[2]},w&2&&ve(f[1])]):{};o.$set(Q)},i(f){d||(U(n.$$.fragment,f),U(i.$$.fragment,f),U(s.$$.fragment,f),U(o.$$.fragment,f),d=!0)},o(f){ee(n.$$.fragment,f),ee(i.$$.fragment,f),ee(s.$$.fragment,f),ee(o.$$.fragment,f),d=!1},d(f){f&&A(t),B(n),B(i),B(s),f&&A(l),f&&A(u),B(o)}}}const mt="âŒ",ht="â­•";function _t({detail:e}){const t=Object.entries(e);for(const n of t)typeof n[1]=="string"&&document.documentElement.style.setProperty(`--${n[0]}`,`${n[1]}`)}function yt(e,t,n){let r=re(),i=new Ke;const c=d=>{switch(d){case k.EMPTY:return"";case k.PLAYER1:return mt;case k.PLAYER2:return ht}};function s(d){d.detail.isDraw()||(i.addWin(d.detail.winner),n(1,i)),setTimeout(()=>n(0,r=re()),1e3)}function l(){n(0,r=re()),i.switchSides(),n(1,i)}function u({detail:d}){i.updateMode(d),n(1,i),n(0,r=re())}return[r,i,c,s,l,u,()=>l()]}class gt extends z{constructor(t){super(),V(this,t,yt,dt,K,{})}}new gt({target:document.getElementById("app")});
